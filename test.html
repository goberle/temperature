<!doctype html>
<html>
<head>
    <title>Realtime Only Test</title>
</head>

<body>
  <canvas id="myChart" width="800" height="600"></canvas>

  <script type="text/javascript" src="/socket.io/socket.io.js"></script>
  <script type="text/javascript" src="js/Chart.js"></script>
  <script>
      var socket = io();
      
      var data = {
        labels: ['a,', 'b'],
        datasets: [
          {
            label: "Sensor1",
            fillColor: "rgba(220,220,220,0.2)",
            strokeColor: "rgba(220,220,220,1)",
            pointColor: "rgba(220,220,220,1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(220,220,220,1)",
            data: [0,40]
          }
        ]
      };

      Chart.defaults.global.animationSteps = 1;

      var ctx = document.getElementById("myChart").getContext("2d");
      var myLineChart = new Chart(ctx).Line(data, {
        bezierCurve: true, 
      });

      socket.on('data', function(d) {
        if (myLineChart.datasets[0].points.length >= 20)
          myLineChart.removeData();
        myLineChart.addData([Math.round(d.sensors[0].temp)], String(d.time));
        console.log(d.sensors[0].temp);
        myLineChart.update();
      });

  </script>
</body>
</html>
